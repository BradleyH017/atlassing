/lustre/scratch126/humgen/projects/sc-eqtl-ibd/analysis/bradley_analysis/scripts/scRNAseq/Atlassing
/lustre/scratch126/humgen/projects/sc-eqtl-ibd/analysis/bradley_analysis/results
['/lustre/scratch126/humgen/projects/sc-eqtl-ibd/analysis/bradley_analysis/scripts/scRNAseq/Atlassing', '/software/team152/bh18/conda_envs/sc4/lib/python39.zip', '/software/team152/bh18/conda_envs/sc4/lib/python3.9', '/software/team152/bh18/conda_envs/sc4/lib/python3.9/lib-dynload', '/software/team152/bh18/conda_envs/sc4/lib/python3.9/site-packages']
/software/team152/bh18/conda_envs/sc4/lib/python3.9/site-packages/numpy/__init__.py
Loaded libraries
scanpy==1.9.3 anndata==0.9.2 umap==0.5.3 numpy==1.24.4 scipy==1.11.1 pandas==1.5.3 scikit-learn==1.3.0 statsmodels==0.14.0 python-igraph==0.10.6 pynndescent==0.5.10
Loaded the data
[11.]
[4224.]
The number of cells initially included is 717757
The number of cells with >1 count in  499209
99.29372
The MAD of the remaining cells is:14.647640228271484
Using the median + 2.5*mad=64.0564022064209, leaving us with 449533 cells
The number of lost B Cell plasma cells lost at a cut off of 50 MT% is 32084(39.2796366352028%)
The number of cells that remain after filtration is 411559
0.2927018488118744
After removal of the high cell samples, dataset size is
(398304, 27978)
Knee:  8
Elbow:  8
The number of PCs used for this analysis is 13
Training:   0%|          | 0/20 [00:00<?, ?it/s]Epoch 1/20:   0%|          | 0/20 [00:00<?, ?it/s]Epoch 1/20:   5%|▌         | 1/20 [11:47<3:43:59, 707.36s/it]Epoch 1/20:   5%|▌         | 1/20 [11:47<3:43:59, 707.36s/it, loss=8.4e+03, v_num=1]Epoch 2/20:   5%|▌         | 1/20 [11:47<3:43:59, 707.36s/it, loss=8.4e+03, v_num=1]Epoch 2/20:  10%|█         | 2/20 [23:24<3:30:19, 701.06s/it, loss=8.4e+03, v_num=1]Epoch 2/20:  10%|█         | 2/20 [23:24<3:30:19, 701.06s/it, loss=8.18e+03, v_num=1]Epoch 3/20:  10%|█         | 2/20 [23:24<3:30:19, 701.06s/it, loss=8.18e+03, v_num=1]Epoch 3/20:  15%|█▌        | 3/20 [34:58<3:17:49, 698.23s/it, loss=8.18e+03, v_num=1]Epoch 3/20:  15%|█▌        | 3/20 [34:58<3:17:49, 698.23s/it, loss=8.05e+03, v_num=1]Epoch 4/20:  15%|█▌        | 3/20 [34:58<3:17:49, 698.23s/it, loss=8.05e+03, v_num=1]Epoch 4/20:  20%|██        | 4/20 [46:23<3:04:45, 692.87s/it, loss=8.05e+03, v_num=1]Epoch 4/20:  20%|██        | 4/20 [46:23<3:04:45, 692.87s/it, loss=8.2e+03, v_num=1] Epoch 5/20:  20%|██        | 4/20 [46:23<3:04:45, 692.87s/it, loss=8.2e+03, v_num=1]Epoch 5/20:  25%|██▌       | 5/20 [57:48<2:52:28, 689.89s/it, loss=8.2e+03, v_num=1]Epoch 5/20:  25%|██▌       | 5/20 [57:48<2:52:28, 689.89s/it, loss=8.29e+03, v_num=1]Epoch 6/20:  25%|██▌       | 5/20 [57:48<2:52:28, 689.89s/it, loss=8.29e+03, v_num=1]Epoch 6/20:  30%|███       | 6/20 [1:09:18<2:40:59, 689.99s/it, loss=8.29e+03, v_num=1]Epoch 6/20:  30%|███       | 6/20 [1:09:18<2:40:59, 689.99s/it, loss=8.25e+03, v_num=1]Epoch 7/20:  30%|███       | 6/20 [1:09:18<2:40:59, 689.99s/it, loss=8.25e+03, v_num=1]Epoch 7/20:  35%|███▌      | 7/20 [1:20:50<2:29:38, 690.62s/it, loss=8.25e+03, v_num=1]Epoch 7/20:  35%|███▌      | 7/20 [1:20:50<2:29:38, 690.62s/it, loss=8.13e+03, v_num=1]Epoch 8/20:  35%|███▌      | 7/20 [1:20:50<2:29:38, 690.62s/it, loss=8.13e+03, v_num=1]Epoch 8/20:  40%|████      | 8/20 [1:32:46<2:19:45, 698.83s/it, loss=8.13e+03, v_num=1]Epoch 8/20:  40%|████      | 8/20 [1:32:46<2:19:45, 698.83s/it, loss=8.14e+03, v_num=1]Epoch 9/20:  40%|████      | 8/20 [1:32:46<2:19:45, 698.83s/it, loss=8.14e+03, v_num=1]Epoch 9/20:  45%|████▌     | 9/20 [1:44:58<2:10:00, 709.10s/it, loss=8.14e+03, v_num=1]Epoch 9/20:  45%|████▌     | 9/20 [1:44:58<2:10:00, 709.10s/it, loss=8.32e+03, v_num=1]Epoch 10/20:  45%|████▌     | 9/20 [1:44:58<2:10:00, 709.10s/it, loss=8.32e+03, v_num=1]Epoch 10/20:  50%|█████     | 10/20 [1:57:15<1:59:38, 717.84s/it, loss=8.32e+03, v_num=1]Epoch 10/20:  50%|█████     | 10/20 [1:57:15<1:59:38, 717.84s/it, loss=8.08e+03, v_num=1]Epoch 11/20:  50%|█████     | 10/20 [1:57:15<1:59:38, 717.84s/it, loss=8.08e+03, v_num=1]Epoch 11/20:  55%|█████▌    | 11/20 [2:08:47<1:46:29, 709.92s/it, loss=8.08e+03, v_num=1]Epoch 11/20:  55%|█████▌    | 11/20 [2:08:47<1:46:29, 709.92s/it, loss=8.08e+03, v_num=1]Epoch 12/20:  55%|█████▌    | 11/20 [2:08:47<1:46:29, 709.92s/it, loss=8.08e+03, v_num=1]Epoch 12/20:  60%|██████    | 12/20 [2:20:11<1:33:34, 701.82s/it, loss=8.08e+03, v_num=1]Epoch 12/20:  60%|██████    | 12/20 [2:20:11<1:33:34, 701.82s/it, loss=8.23e+03, v_num=1]Epoch 13/20:  60%|██████    | 12/20 [2:20:11<1:33:34, 701.82s/it, loss=8.23e+03, v_num=1]Epoch 13/20:  65%|██████▌   | 13/20 [2:31:31<1:21:08, 695.47s/it, loss=8.23e+03, v_num=1]Epoch 13/20:  65%|██████▌   | 13/20 [2:31:31<1:21:08, 695.47s/it, loss=8.16e+03, v_num=1]Epoch 14/20:  65%|██████▌   | 13/20 [2:31:31<1:21:08, 695.47s/it, loss=8.16e+03, v_num=1]Epoch 14/20:  70%|███████   | 14/20 [2:42:51<1:09:03, 690.57s/it, loss=8.16e+03, v_num=1]Epoch 14/20:  70%|███████   | 14/20 [2:42:51<1:09:03, 690.57s/it, loss=8.22e+03, v_num=1]Epoch 15/20:  70%|███████   | 14/20 [2:42:51<1:09:03, 690.57s/it, loss=8.22e+03, v_num=1]Epoch 15/20:  75%|███████▌  | 15/20 [2:54:11<57:17, 687.56s/it, loss=8.22e+03, v_num=1]  Epoch 15/20:  75%|███████▌  | 15/20 [2:54:11<57:17, 687.56s/it, loss=8.28e+03, v_num=1]Epoch 16/20:  75%|███████▌  | 15/20 [2:54:11<57:17, 687.56s/it, loss=8.28e+03, v_num=1]Epoch 16/20:  80%|████████  | 16/20 [3:05:33<45:43, 685.94s/it, loss=8.28e+03, v_num=1]Epoch 16/20:  80%|████████  | 16/20 [3:05:33<45:43, 685.94s/it, loss=7.94e+03, v_num=1]Epoch 17/20:  80%|████████  | 16/20 [3:05:33<45:43, 685.94s/it, loss=7.94e+03, v_num=1]Epoch 17/20:  85%|████████▌ | 17/20 [3:16:51<34:10, 683.58s/it, loss=7.94e+03, v_num=1]Epoch 17/20:  85%|████████▌ | 17/20 [3:16:51<34:10, 683.58s/it, loss=7.95e+03, v_num=1]Epoch 18/20:  85%|████████▌ | 17/20 [3:16:51<34:10, 683.58s/it, loss=7.95e+03, v_num=1]Epoch 18/20:  90%|█████████ | 18/20 [3:28:09<22:43, 681.71s/it, loss=7.95e+03, v_num=1]Epoch 18/20:  90%|█████████ | 18/20 [3:28:09<22:43, 681.71s/it, loss=8.17e+03, v_num=1]Epoch 19/20:  90%|█████████ | 18/20 [3:28:09<22:43, 681.71s/it, loss=8.17e+03, v_num=1]Epoch 19/20:  95%|█████████▌| 19/20 [3:39:27<11:20, 680.59s/it, loss=8.17e+03, v_num=1]Epoch 19/20:  95%|█████████▌| 19/20 [3:39:27<11:20, 680.59s/it, loss=8.24e+03, v_num=1]Epoch 20/20:  95%|█████████▌| 19/20 [3:39:27<11:20, 680.59s/it, loss=8.24e+03, v_num=1]Epoch 20/20: 100%|██████████| 20/20 [3:50:45<00:00, 679.97s/it, loss=8.24e+03, v_num=1]Epoch 20/20: 100%|██████████| 20/20 [3:50:45<00:00, 679.97s/it, loss=8.2e+03, v_num=1] Epoch 20/20: 100%|██████████| 20/20 [3:50:45<00:00, 692.29s/it, loss=8.2e+03, v_num=1]
              Isolated labels  ...            Total
Embedding                      ...                 
X_pca                0.635553  ...         0.512288
X_scVI               0.518289  ...         0.486626
Metric Type  Bio conservation  ...  Aggregate score

[3 rows x 13 columns]
The method with the greatest overall score is: 
['X_pca']

------------------------------------------------------------
Sender: LSF System <lsfadmin@node-11-2-2>
Subject: Job 34691969: <rectum_atlassing01> in cluster <farm5> Exited

Job <rectum_atlassing01> was submitted from host <farm5-head2> by user <bh18> in cluster <farm5> at Tue Sep 19 16:15:53 2023
Job was executed on host(s) <4*node-11-2-2>, in queue <long>, as user <bh18> in cluster <farm5> at Tue Sep 19 16:15:54 2023
</nfs/users/nfs_b/bh18> was used as the home directory.
</lustre/scratch126/humgen/projects/sc-eqtl-ibd/analysis/bradley_analysis/scripts/scRNAseq/Atlassing> was used as the working directory.
Started at Tue Sep 19 16:15:54 2023
Terminated at Wed Sep 20 06:20:59 2023
Results reported at Wed Sep 20 06:20:59 2023

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#! /bin/bash
#BSUB -o logs/preprocessing-%J-output.log
#BSUB -e logs/preprocessing-%J-error.log 
#BSUB -q normal
#BSUB -G team152
#BSUB -n 4
#BSUB -M 300000
#BSUB -a "memlimit=True"
#BSUB -R "select[mem>300000] rusage[mem=300000] span[hosts=1]"
#BSUB -J 9

# Define option
cd /lustre/scratch126/humgen/projects/sc-eqtl-ibd/analysis/bradley_analysis

## FOR THE ATLASSING OF THE RECTUM (#BSUB -M 200000)
# This is done on the 'All_not_gt_subset' data
# Use the sc4 environment
cd scripts/scRNAseq/Atlassing/
python atlassing_rectum_all_samples.py
# bsub -o logs/rectum_atlassing01-%J-output.log -e logs/rectum_atlassing01-%J-error.log -q long -J "rectum_atlassing01" < atlassing_rectum_submit.sh 


------------------------------------------------------------

Exited with exit code 1.

Resource usage summary:

    CPU time :                                   122779.23 sec.
    Max Memory :                                 143817 MB
    Average Memory :                             105622.61 MB
    Total Requested Memory :                     300000.00 MB
    Delta Memory :                               156183.00 MB
    Max Swap :                                   -
    Max Processes :                              5
    Max Threads :                                40
    Run time :                                   50704 sec.
    Turnaround time :                            50706 sec.

The output (if any) is above this job summary.



PS:

Read file <logs/rectum_atlassing01-34691969-error.log> for stderr output of this job.

